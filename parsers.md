|                 | Tree sitter                                                                                                                                                                                                                                                                                                                                | pyright                                                                                                                                                                                                                                                                                                                                                                                         |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| установка       | Довольно стремная, нужно совпадение версий електрона. Как для основной библиотеки, так и для граматики. Чтобы этого избежать, можно использовать `web-tree-sitter` и скачивать скомпилированные файлы граматики                                                                                                                            | Парсер не сложно достать из пайрайтовского расширения. Далее достаточно просто закинуть исходники в проект                                                                                                                                                                                                                                                                                      |
| Просмотр дерева | Есть метод tostring, но так дерево выходит не очень читаемым. Проще смотреть в песочнице https://tree-sitter.github.io/tree-sitter/playground                                                                                                                                                                                              | Можно вывести все дерево стандартным `util.inspect(parseTree, { depth: null });`, или просто ползать по нему в режиме дебагера                                                                                                                                                                                                                                                                  |
| error recovery  | В случае ошибки просто оборачивает непонятный код в ноду ошибку. При этом содержимое ноды продолжает корректно парсится. Есть проблемы с выявлением ошибок (`s = \n 123` выделяется как одна целая нода). При этом текста ошибки нету. Изредка появляются missing ноды, в которых указано, чего конкретно не хватает                       | В некоторых случаях рековери вообще перестает работать, например если убрать закрывающую скобку у функции, весь код ниже не будет учитываться. Во время парсинга так же прокидывается объект типа `DiagnosticSink`, из которого можно достать все ошибки с сообщениями и позициями                                                                                                              |
| Устройство ноды | Все ноды однообразны, принадлежат к классу `SyntaxNode`. У условной ноды вызова функции и присваивания отличается только `typeId` с `type`. Ноды делятся на `named` and `anonymous` ноды. `named` означает узел, который имеет явно заданное имя в грамматике. К `anonymous` относятся вообще все ноды, то есть запятые и другие операторы | Каждый тип ноды имеет свое устройство. Например, у ноты типа `StatementList` есть поле `statements`, а у ноды типа `Function` есть поле `parameters`. Поэтому нету общего случая взятия чилдов или сиблингов у ноды. Чтобы взять чилдов в общем виде нужно пользоваться функцией `getChildNodes(node: ParseNode)`, которая внутри себя проверяет тип ноды, и для каждой возвращает их по своему |
| микро проблемы        |
