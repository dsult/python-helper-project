# Change Log

- Подключeн три-ситтер
- сделана хоть как-то штукa с переносом строки

  0.0.6 - нормально делаются переносы строк, кажется багов не осталось. Не совсем понятно что делать с fr/rf строками, и надо ли

- исправлен ентр до знака \{ в f строках
- исправлен ентр до знака \n

  0.0.7 - 2 крайних случая сверху + обобщил получение штук при помощи stringtNode
  0.0.8 - микро рефакторинг, + несколько классов

- норм такой рефакторинг, вся логика унесена внутрь классов

- в ассисте отдельно идет проверка применимости и применение
- после того как нашелся применимый ассист, выходим из сервиса
- id нод вынесены в константы класса ассиста

  0.1.0 - норм рефакторинг такой, осталось разбить на файлики и можно начинать делать новые ассисты

- раскидать по файликам красиво

  0.1.1 - получается архитектура готова
  0.1.2 - небольшой шаблон для докстринги

- сделать ассист для док стринги хоть как-то
- понять почему дерево ломается при вставке класса(не понял но починил, убрал халлокласс)
- ассист обрабатывает все (вроде как) возможные виды аргументов

  0.1.3 - по большей части работает, но возможно еще нужно что-то починить

- в одном из 5 случаев(???) может сработать автокомплит функции
- <s>обнаружен способ вставлять сниппеты без undo(!!!)</s>

  0.1.4 - шаблон для автокомплита функций

- обнаружен (работающий) способ вставлять сниппеты без undo(!!!)
- сделать чтобы при андо расскрытия докстринги оно по человечески раскрывалось
- переписал сепаратор стринги сниппетом, но так отступ нужно поправить
- заменил реплейс в ассисте дефов новой вставкой сниппета

  0.1.5

- тройная строка раскрывается с дополнительным переносом
- докстринга разворачивается только если она первая в теле функции
- переписан импорт триситтера таким образом чтобы в `TypeAssistService`, `parser` и `tree` были с типами `TreeSitter` и `TreeSitter.Tree | null` вместо `Any`

  0.1.6

- переписаны `interface Context` с типами `TreeSitter` и `TreeSitter.Tree | null` вместо `Any`
- дерево теперь не может быть нуллом, решена проблема с асинхронным конструктором
- ассист функций для проверки где он обрезает весь документ с конца строки, что позволяет лучше определять что мы пишем скобки. Благодаря этому автокомплит функций работает вроде как без проблем
- есть проверка что мы в пу файле, по идее ассист теперь может тригириться только внутри питоновских файлов
- self не дописывается если последний декоратор - `@staticmethod`

  0.1.7 - прогресс по комплиту функций

- метод `checkDecoratorAndClassContext` для проверки контекста, интерфейс позволяет легко расширяться, если я захочу добавить определенное поведение для `@property` и тп
- селф не записывается в параметры докстроки
- тип ретерна вписывается в докстроку
- вынес создание сниппета для докстроки

  0.1.8 - микрофиксы докстроки + крутые свитчи в `FunctionCompleter`

- сепоратор оборачивает строку в скобки если это нужно
- кастомное условие для разных декораторов (@classmethod, .setter)
- новый формат док строки(Epytext), выбирается в настройках Docstring Format
- - (???) если \*args или \*\*kwargs приписать тайп, то будетзаписываться штука со звездами:

    ```
    @type *args: int
    @param \*args:
    ```

    (пайчарм убирает звезды), не уверен что имеет смысл тут что-то менять, слишком абскурный случай

    0.1.9

- скобками оборачивается строка так же внутри выражений типа +, или +=
- сделал файлик `TreeUtils.ts`, с функцией которая проходит по парентам наверх дерева и проверяет есть ли парент с определенным тайпом
- ctrl+enter (ctrl+shift+enter) не ломает строки и докстроки
- вынесен конструктор сниппетов для докстрок в отдельный файл
- добавлен формат докстроки `reStructuredText`, `Google` и пустой `Plain`

  0.1.10

  0.1.11 - почти ничего не изменилось

- кое как работает обертывание скобками с ентром
- настройка включения-выключения разных ассистов
- жесть тут есть отдельная мд штука для чейнжлога, а я все в ридми раньше писал

  0.2.0 - добавление скобок во время ентра внутри ретерна, присваивания и тд

- почти полностью переделал обертку скобками, раньше оно оборачивало дополнительно ретерн, если ентр ставился перед самим ретерном
- скобками не оборачиваются ентры внутри цифер и некоторых других нод (типо черный список)
- функция которая убирает все пробелы после курсора

  0.2.1

- починил штуку
- - ентр строки условно `s = a +`, где обрывается +, парсер считает что выражение далее в документе после этой строки - ее продолжение, и оборачивает лишнее
- теперь удаляю пробелы справа при любых переносах строки

  0.2.2

- перенос курсора на следущую строку при комментировании
- - \+ возможность выключать в настройках

  \0.2.3

- в тест цмд триситтер заполняет недостающие скобки (иногда)
- продливание комментария при ентре

  0.2.4

- `"activationEvents": ["onStartupFinished"]` заменил на `onLanguage:python`, таким образом расширение не падает если запустить его не на питоновском файле
- удаление пробелов после переноса комментариев
- ReturnDedent

  0.2.5

- ало BracketingExpressionCompleter в хлам сломан, чек

```
def f():

    return

"""ddd|"""
```

- начал использовать модули с уже +- реализованными тестами
- написал шаблон теста для комплитера комментариев

  0.2.6

- +- архитектура для тестов готова
- рабочие тесты норм делаются

  0.2.7

- нерабочие тесты больше не вызывают бесконечный стектрейс
- проверка правильной позиции каретки
- в тесте можно вставлять любые символы, вставится сниппетом то, что находится в <>. Таким образом проверяется автокомплит функций
- тесты на все (???) ассисты которые уже были сделаны

- 0.2.8

- попытка в регулирование табовых индентов
- новый <s>ctrl+backspace</s> ctrl+shift+backspace

- 0.2.9

- возможность писать тесты для ctrl+shift+backspace

- 0.3.0

- много новых случаев когда, и каким образом срабатывает удаление
- - удаляет целиком ноду до курсора
- - удаляет пробелы до и после в +- пустой ноде
- тесты на все новые штуки, проще там посмотреть что делается

- 0.3.1

- обрабатываются штуки по типу print(1 + ((((r"some <caret> test")))))

- 0.3.2

- подключен пайрайтовский парсер

- 0.4.0

- файлик со сравнением парсеров + файлики для проверки парсеров
- начало переписывания скобочного ассиста на пайрайт

- 0.4.1

- Скобочный ассист полностью переписан на пайрайт (работает лучше триситтера) + больше скобочных тестов

- 0.4.2

- добавлены паки грамматических токенизаторов
- хорошо подсвечиваются правильные строки, но все ломается если не закрыть скобку
- <s>включение-выключение подсветки json</s>

- 0.4.3

- поддержка xml
- включение-выключение подсветок json, xml

- 0.4.4

- django подсветка из расширения
- фиксы строкового разделителя

- 0.4.5

- подсветка строковых селекторов (для селениума)
- включение-выключение

- 0.4.6

- бенчмарки

- 0.5.0

- анализ в ноутбук файле
- antlr парсер (????)

- 0.5.1

- css подсветка работает без lit расширения
- ReturnDedent test fix
- readme для бенчмарка, смарт делита
- readme для всех остальных

## [Unreleased]

- при сборе датасета ограничивать размер файла, можно сделать специальные датасеты где будут большие файлы
- сделать усредненные замеры времени чтобы меньше выбросов было
- больше всего проверять
- замер инициализации(???)

- если открыть вскод с настройками на первой начальном экране, и попробовать что-то изменить, изменения не будут приняты в силу

- ```
  s = 111 + 222 - 333
  ```

скобочный пайрайтовский ассист тригерится внутри (нужны тесты)

- ctrl+enter тригирит пайрайтовский ассист

- ```
  print(s, 1<caret>23)
  ```

удаление тригерится

- `rejected promise not handled within 1 second: RangeError: Invalid count value: -1
extensionHostProcess.js:144
stack trace: RangeError: Invalid count value: -1
	at String.repeat (<anonymous>)
	at BracketingExpressionCompleter.apply (c:\Users\huawei\python-helper-project\out\typing_assist\completer\BracketingExpressionCompleter.js:91:31)
	at async TypeAssistService.processing (c:\Users\huawei\python-helper-project\out\typing_assist\TypeAssistService.js:129:21)`
- - (на кнтрл+z BracketingExpressionCompleter)

- подумать про обрезание пробелов при переносе строки когда уже нормальные отступы

- смотрится всего лишь один (последний декоратор)

## Что надо протестировать

- ентры в строках после \\

## Особенности

- def def **()** тригерит ассист, дерево думает что второй деф это identifier
- есть проблемы с **не**пробельной табуляцией
- fr\\rf строки не обрабатываются
